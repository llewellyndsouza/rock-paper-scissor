<!DOCTYPE html>
<html>

<head>
    <title>Rock Paper Scissor- the game</title>
</head>

<body>

    <button id='rockButton'>Rock</button>
    <button id='paperButton'>Paper</button>
    <button id='scissorButton'>Scissor</button>

    <div id='resultDisplay'>
    </div>

    <script>

        let playerScore = 0;
        let computerScore = 0;
        let roundNumber = 0

        // Returns a random selection in string for the computer
        function computerPlay () {
            let rand = Math.random();
            if(rand<0.333) return 'rock';
            else if (rand<0.666) return 'paper';
            else return 'scissor';
        }

        // prints the result to a div
        function displayResult(result) {
            let div = document.getElementById('resultDisplay');

            let node = document.createElement('p');
            node.textContent = result.toString();

            div.appendChild(node);
        }


        // Resets the scores
        function resetGame() {
            playerScore = 0;
            computerScore = 0;
            roundNumber = 0

            let div = document.getElementById('resultDisplay');
            while (div.firstChild) {
                div.removeChild(div.firstChild);
            }
        }


        // Invoked when a button is clicked
        function playRound(playerSelection, computerSelection) {
            let result = '';

            if (roundNumber==5) resetGame();

            if (playerSelection==computerSelection) result = 'tie';
            else if (playerSelection=='paper'&&computerSelection=='rock') {
                result = 'player wins ' + ++playerScore + "-" + computerScore;
                roundNumber++;
            }
            else if (playerSelection=='rock'&&computerSelection=='scissor') {
                result = 'player wins ' + ++playerScore + "-" + computerScore;
                roundNumber++;
            }
            else if (playerSelection=='scissor'&&computerSelection=='paper') {
                result = 'player wins ' + ++playerScore + "-" + computerScore;
                roundNumber++;
            }
            else {
                result = 'computer wins ' + ++computerScore + "-" + playerScore;
                roundNumber++;
            }

            displayResult(result);
            if (roundNumber==5)
                if(computerScore>playerScore) displayResult("Computer wins");
                else displayResult("Player wins");

        }

        // Event listeners for the buttons
        document.getElementById('rockButton').addEventListener('click',function() { playRound('rock',computerPlay());});
        document.getElementById('paperButton').addEventListener('click',function() { playRound('paper',computerPlay());});
        document.getElementById('scissorButton').addEventListener('click',function() { playRound('scissor',computerPlay());});
        

    </script>

</body>

</html>